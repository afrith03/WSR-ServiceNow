<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_operation">
    <sys_ws_operation action="INSERT_OR_UPDATE">
        <active>true</active>
        <consumes>application/json,application/xml,text/xml</consumes>
        <consumes_customized>false</consumes_customized>
        <default_operation_uri/>
        <enforce_acl>cf9d01d3e73003009d6247e603f6a990</enforce_acl>
        <http_method>POST</http_method>
        <name>postTickets</name>
        <operation_script><![CDATA[(function process( /*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {
    var reqst = request.body.data;
    // gs.log("qwertyuiop----------------->>>>" + JSON.stringify(reqst));
    var ticketArray = reqst.content;

    var availableArray = [];
    var notavailableArray = [];

    for (var i = 0; i < ticketArray.length; i++) {
        var gr = new GlideRecord("u_wsr_table");
        gr.addQuery("u_incident_id", ticketArray[i].Incident_Number);
        gr.query();
        if (gr._next()) {
            availableArray.push(ticketArray[i].Incident_Number);
        } else {
            notavailableArray.push(ticketArray[i].Incident_Number);
            // gr.initialize();
            // gr.setValue('u_assignee', ticketArray[i].Assignee_Login_ID);
            // gr.setValue('u_business_categorization3', ticketArray[i].BusinessCategorization3);
            // gr.setValue('u_customer_id', ticketArray[i].CustomerLoginID);
            // gr.setValue('u_incident_id', ticketArray[i].Incident_Number);
            // gr.setValue('u_incident_type', ticketArray[i].IncidentType);
            // gr.setValue('u_notes', ticketArray[i].Detailed_Decription);
            // gr.setValue('u_oc_t3', ticketArray[i].Categorization_Tier_3);
            // gr.setValue('u_priority', ticketArray[i].Priority);
            // gr.setValue('u_resolution', ticketArray[i].Resolution);
            // gr.setValue('u_status', ticketArray[i].Status);
            // gr.setValue('u_status_reason', ticketArray[i].Status_Reason);
            // gr.setValue('u_summary', ticketArray[i].Description);
            // gr.setValue('u_create_date', getDate(ticketArray[i].sysCreateTime));
            // gr.setValue('u_create_date_time', getDate(ticketArray[i].sysCreateTime));
            // gr.setValue('u_closed_date', getDate(ticketArray[i].Closed_Date));
            // gr.setValue('u_last_modified_date', getDate(ticketArray[i].Last_Modified_Date));
            // gr.setValue('u_last_modified_date_time', getDate(ticketArray[i].Last_Modified_Date));
            // gr.setValue('u_resolve_date', getDate(ticketArray[i].Resolved_Date));
            // gr.setValue('u_resolve_date_time', getDate(ticketArray[i].Resolved_Date));
            // gr.insert();
			// var tempStr=JSON.stringify(ticketArray[i]);
			// gs.log("in script 1"+ticketArray[i]);
            gs.eventQueue("process.inbound.tickets",'', "tempStr");
        }

    }




    response.setBody({
        "Codeword": "vanakam da mapla",
        "paathukalam": "tha",
        "arrayLength": ticketArray.length,
        "availabeTicket": availableArray,
        "notAvailabeTicket": notavailableArray,
    });
    response.setStatus(201);


})(request, response);

function getDate(timestamp) {
    var gdt = new GlideDateTime();
    if (timestamp != null) {
        gdt.setNumericValue(timestamp);
        return gdt;
    }
    return '';
}]]></operation_script>
        <operation_uri>/api/821846/v1/gettickets</operation_uri>
        <produces>application/json,application/xml,text/xml</produces>
        <produces_customized>false</produces_customized>
        <relative_path>/</relative_path>
        <request_example/>
        <requires_acl_authorization>true</requires_acl_authorization>
        <requires_authentication>true</requires_authentication>
        <requires_snc_internal_role>true</requires_snc_internal_role>
        <short_description/>
        <sys_class_name>sys_ws_operation</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-08-31 06:11:58</sys_created_on>
        <sys_id>17061fa8978db550e24677d71153af3c</sys_id>
        <sys_mod_count>30</sys_mod_count>
        <sys_name>postTickets</sys_name>
        <sys_package display_value="WSR" source="97abf65397307150e24677d71153afeb">97abf65397307150e24677d71153afeb</sys_package>
        <sys_policy/>
        <sys_scope display_value="WSR">97abf65397307150e24677d71153afeb</sys_scope>
        <sys_update_name>sys_ws_operation_17061fa8978db550e24677d71153af3c</sys_update_name>
        <sys_updated_by>shanawaz@dyooti.com</sys_updated_by>
        <sys_updated_on>2023-09-01 16:05:34</sys_updated_on>
        <web_service_definition display_value="GetTickets">4ec5db68978db550e24677d71153afb6</web_service_definition>
        <web_service_version display_value="v1">4dda172097cdb550e24677d71153af79</web_service_version>
    </sys_ws_operation>
</record_update>
